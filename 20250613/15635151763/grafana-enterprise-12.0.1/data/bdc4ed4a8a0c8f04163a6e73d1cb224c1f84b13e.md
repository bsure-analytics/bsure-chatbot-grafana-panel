# Test info

- Name: BSure Chatbot Panel E2E Tests >> should load chatbot panels successfully
- Location: /home/runner/work/bsure-chatbot-grafana-panel/bsure-chatbot-grafana-panel/tests/panel.spec.ts:18:7

# Error details

```
Error: Timed out 10000ms waiting for expect(locator).toHaveCount(expected)

Locator: locator('[data-panelid]').filter({ hasText: /Sample Panel/ })
Expected: 2
Received: 0
Call log:
  - expect.toHaveCount with timeout 10000ms
  - waiting for locator('[data-panelid]').filter({ hasText: /Sample Panel/ })
    14 Ã— locator resolved to 0 elements
       - unexpected value "0"

    at /home/runner/work/bsure-chatbot-grafana-panel/bsure-chatbot-grafana-panel/tests/panel.spec.ts:21:26
```

# Page snapshot

```yaml
- link "Skip to main content":
  - /url: "#pageContent"
- button "Close menu":
  - img "Grafana"
- text: Grafana
- button "Undock menu"
- navigation:
  - list "Navigation":
    - listitem:
      - link "Home":
        - /url: /
    - listitem:
      - link "Bookmarks":
        - /url: /bookmarks
      - 'button "Expand section: Bookmarks"'
    - listitem:
      - link "Starred":
        - /url: /dashboards?starred
      - 'button "Expand section: Starred"'
    - listitem:
      - link "Dashboards":
        - /url: /dashboards
      - 'button "Expand section: Dashboards"'
    - listitem:
      - link "Explore":
        - /url: /explore
    - listitem:
      - link "Drilldown New!":
        - /url: /drilldown
      - 'button "Expand section: Drilldown"'
    - listitem:
      - link "Alerting":
        - /url: /alerting
      - 'button "Expand section: Alerting"'
    - listitem:
      - link "Connections":
        - /url: /connections
      - 'button "Expand section: Connections"'
    - listitem:
      - link "Administration":
        - /url: /admin
      - 'button "Expand section: Administration"'
- banner:
  - navigation "Breadcrumbs":
    - list:
      - listitem:
        - link "Home":
          - /url: /
      - listitem:
        - link "Dashboards":
          - /url: /dashboards
      - listitem: b.sure Chatbot Demo
  - button "Search..."
  - text: ctrl+k
  - button "New"
  - button "Help"
  - button "Profile":
    - img "User avatar"
  - button "Mark as favorite"
  - button "Edit"
  - button "Export"
  - button "Share"
  - button "Toggle share menu"
- main:
  - 'button "Time range selected: Last 6 hours"': Last 6 hours
  - button "Zoom out time range"
  - button "Refresh"
  - button "Auto refresh turned off. Choose refresh time interval"
  - region "Sample Panel 1":
    - button "Panel status"
    - heading "Sample Panel 1" [level=2]
  - region "Sample Panel 2":
    - button "Panel status"
    - heading "Sample Panel 2" [level=2]
```

# Test source

```ts
   1 | import { test, expect } from '@grafana/plugin-e2e';
   2 |
   3 | test.describe('BSure Chatbot Panel E2E Tests', () => {
   4 |   test.beforeEach(async ({ page }) => {
   5 |     // Navigate to the provisioned dashboard that already has our panels
   6 |     await page.goto('/d/a538aeff-5a8a-42a5-901c-938d896fdd6f/b-sure-chatbot-demo');
   7 |     
   8 |     // Wait for the dashboard to load by looking for the dashboard title
   9 |     await page.waitForSelector('text=b.sure Chatbot Demo', { timeout: 30000 });
  10 |     
  11 |     // Wait for panels to be rendered
  12 |     await page.waitForLoadState('networkidle');
  13 |     
  14 |     // Give additional time for React components to initialize
  15 |     await page.waitForTimeout(5000);
  16 |   });
  17 |
  18 |   test('should load chatbot panels successfully', async ({ page }) => {
  19 |     // First, check that the panels are present in the DOM (using more generic selectors)
  20 |     const panels = page.locator('[data-panelid]').filter({ hasText: /Sample Panel/ });
> 21 |     await expect(panels).toHaveCount(2);
     |                          ^ Error: Timed out 10000ms waiting for expect(locator).toHaveCount(expected)
  22 |     
  23 |     // Check for chat interface elements - use placeholder text as fallback
  24 |     const messageInputs = page.locator('input[placeholder*="Ask me about"]');
  25 |     
  26 |     // If we can find the inputs, check them
  27 |     const inputCount = await messageInputs.count();
  28 |     if (inputCount > 0) {
  29 |       await expect(messageInputs.first()).toBeVisible();
  30 |       // Check for send buttons
  31 |       const sendButtons = page.getByRole('button', { name: 'Send' });
  32 |       if (await sendButtons.count() > 0) {
  33 |         await expect(sendButtons.first()).toBeVisible();
  34 |       }
  35 |     } else {
  36 |       // Fallback: just verify the panels loaded (even if backend isn't working)
  37 |       console.log('Chat inputs not found - likely backend connectivity issue, but panels are present');
  38 |       await expect(panels.first()).toBeVisible();
  39 |     }
  40 |   });
  41 |
  42 |   test('should show dashboard title and panels', async ({ page }) => {
  43 |     // Basic test to ensure the dashboard loads correctly
  44 |     await expect(page.locator('text=b.sure Chatbot Demo')).toBeVisible();
  45 |     
  46 |     // Check that panels exist
  47 |     const panels = page.locator('[data-panelid]');
  48 |     await expect(panels).toHaveCount(2);
  49 |   });
  50 |
  51 |   test('should render panel content', async ({ page }) => {
  52 |     // Check that panel titles are visible
  53 |     await expect(page.locator('text=Sample Panel 1')).toBeVisible();
  54 |     await expect(page.locator('text=Sample Panel 2')).toBeVisible();
  55 |   });
  56 |
  57 |   test('should be responsive on different screen sizes', async ({ page }) => {
  58 |     // Test basic responsiveness
  59 |     await page.setViewportSize({ width: 1920, height: 1080 });
  60 |     await expect(page.locator('text=b.sure Chatbot Demo')).toBeVisible();
  61 |
  62 |     await page.setViewportSize({ width: 768, height: 1024 });
  63 |     await expect(page.locator('text=b.sure Chatbot Demo')).toBeVisible();
  64 |
  65 |     await page.setViewportSize({ width: 375, height: 667 });
  66 |     await expect(page.locator('text=b.sure Chatbot Demo')).toBeVisible();
  67 |   });
  68 | });
  69 |
```