# Test info

- Name: BSure Chatbot Panel E2E Tests >> should be responsive on different screen sizes
- Location: /home/runner/work/bsure-chatbot-grafana-panel/bsure-chatbot-grafana-panel/tests/panel.spec.ts:86:7

# Error details

```
Error: Timed out 10000ms waiting for expect(locator).toBeVisible()

Locator: getByRole('textbox', { name: 'Type your message' }).first()
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 10000ms
  - waiting for getByRole('textbox', { name: 'Type your message' }).first()

    at /home/runner/work/bsure-chatbot-grafana-panel/bsure-chatbot-grafana-panel/tests/panel.spec.ts:91:32
```

# Page snapshot

```yaml
- link "Skip to main content":
  - /url: "#pageContent"
- banner:
  - button "Open menu":
    - img "Grafana"
  - navigation "Breadcrumbs":
    - list:
      - listitem:
        - link "Home":
          - /url: /
      - listitem:
        - link "Dashboards":
          - /url: /dashboards
      - listitem: b.sure Chatbot Demo
  - button "Search or jump to..."
  - text: ctrl+k
  - button "New"
  - button "Help"
  - button "News"
  - button "Enable kiosk mode"
  - button "Profile":
    - img "User avatar"
  - button "Mark as favorite"
  - button "Switch to old dashboard page"
  - button "Edit"
  - button "Export"
  - button "Share"
  - button "share-dropdown-menu"
- main:
  - 'button "Time range selected: Last 6 hours"': Last 6 hours
  - button "Zoom out time range"
  - button "Refresh"
  - button "Auto refresh turned off. Choose refresh time interval"
  - region "Sample Panel 1":
    - button "Panel status"
    - heading "Sample Panel 1" [level=2]
  - region "Sample Panel 2":
    - button "Panel status"
    - heading "Sample Panel 2" [level=2]
```

# Test source

```ts
   1 | import { test, expect } from '@grafana/plugin-e2e';
   2 |
   3 | test.describe('BSure Chatbot Panel E2E Tests', () => {
   4 |   test.beforeEach(async ({ page }) => {
   5 |     // Navigate to the provisioned dashboard that already has our panels
   6 |     await page.goto('/d/a538aeff-5a8a-42a5-901c-938d896fdd6f/b-sure-chatbot-demo');
   7 |     
   8 |     // Wait for the dashboard to load by looking for the dashboard title
   9 |     await page.waitForSelector('text=b.sure Chatbot Demo', { timeout: 30000 });
   10 |     
   11 |     // Wait for panels to be rendered
   12 |     await page.waitForLoadState('networkidle');
   13 |     
   14 |     // Give additional time for React components to initialize
   15 |     await page.waitForTimeout(2000);
   16 |   });
   17 |
   18 |   test('should load chatbot panels successfully', async ({ page }) => {
   19 |     // Check that we have chat interface elements - this proves our panel loaded correctly
   20 |     const messageInputs = page.getByRole('textbox', { name: 'Type your message' });
   21 |     const sendButtons = page.getByRole('button', { name: 'Send message' });
   22 |     
   23 |     // Should have 2 message inputs (one for each panel)
   24 |     await expect(messageInputs).toHaveCount(2);
   25 |     await expect(sendButtons).toHaveCount(2);
   26 |     
   27 |     // First message input and send button should be visible
   28 |     await expect(messageInputs.first()).toBeVisible();
   29 |     await expect(sendButtons.first()).toBeVisible();
   30 |   });
   31 |
   32 |   test('should allow configuring panel options', async ({ page }) => {
   33 |     // This test ensures that the panel configuration is accessible
   34 |     // For now, let's just verify that the basic interface works
   35 |     const messageInput = page.getByRole('textbox', { name: 'Type your message' }).first();
   36 |     await expect(messageInput).toBeVisible();
   37 |     
   38 |     // Test that we can interact with the interface
   39 |     await messageInput.fill('Configuration test');
   40 |     await messageInput.clear();
   41 |     
   42 |     // Verify the interface is still functional
   43 |     await expect(messageInput).toBeEnabled();
   44 |   });
   45 |
   46 |   test('should handle user interactions', async ({ page }) => {
   47 |     // Test interactions with the first panel
   48 |     const messageInput = page.getByRole('textbox', { name: 'Type your message' }).first();
   49 |     const sendButton = page.getByRole('button', { name: 'Send message' }).first();
   50 |
   51 |     // Verify initial state
   52 |     await expect(messageInput).toBeVisible();
   53 |     await expect(sendButton).toBeVisible();
   54 |     await expect(sendButton).toBeDisabled(); // Should be disabled when input is empty
   55 |
   56 |     // Test message input
   57 |     await messageInput.fill('What data do you see in this dashboard?');
   58 |     await expect(sendButton).toBeEnabled();
   59 |
   60 |     // Clear and verify button is disabled again
   61 |     await messageInput.clear();
   62 |     await expect(sendButton).toBeDisabled();
   63 |   });
   64 |
   65 |   test('should handle sending messages and maintain functionality', async ({ page }) => {
   66 |     // Test message sending functionality with the first panel
   67 |     const messageInput = page.getByRole('textbox', { name: 'Type your message' }).first();
   68 |     const sendButton = page.getByRole('button', { name: 'Send message' }).first();
   69 |
   70 |     // Send a test message
   71 |     await messageInput.fill('Test message');
   72 |     await sendButton.click();
   73 |
   74 |     // Panel should remain functional after sending (regardless of API response)
   75 |     await expect(messageInput).toBeEnabled();
   76 |     await expect(sendButton).toBeVisible();
   77 |     
   78 |     // Input should be cleared after sending
   79 |     await expect(messageInput).toHaveValue('');
   80 |     
   81 |     // Should be able to type again
   82 |     await messageInput.fill('Another test message');
   83 |     await expect(sendButton).toBeEnabled();
   84 |   });
   85 |
   86 |   test('should be responsive on different screen sizes', async ({ page }) => {
   87 |     const messageInput = page.getByRole('textbox', { name: 'Type your message' }).first();
   88 |
   89 |     // Test desktop size
   90 |     await page.setViewportSize({ width: 1920, height: 1080 });
>  91 |     await expect(messageInput).toBeVisible();
      |                                ^ Error: Timed out 10000ms waiting for expect(locator).toBeVisible()
   92 |
   93 |     // Test tablet size
   94 |     await page.setViewportSize({ width: 768, height: 1024 });
   95 |     await expect(messageInput).toBeVisible();
   96 |
   97 |     // Test mobile size
   98 |     await page.setViewportSize({ width: 375, height: 667 });
   99 |     await expect(messageInput).toBeVisible();
  100 |   });
  101 | });
  102 |
```